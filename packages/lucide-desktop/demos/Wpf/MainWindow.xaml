<Window x:Class="Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:local="clr-namespace:Wpf"
        xmlns:vm="clr-namespace:Wpf.ViewModels"
        mc:Ignorable="d"
        Title="MainWindow"
        Height="450"
        Width="800">
  <Window.DataContext>
    <vm:MainWindowViewModel />
  </Window.DataContext>
  <Window.Resources>
    <ControlTemplate x:Key="listBoxTemplate">
      <Border BorderBrush="Orange"
              BorderThickness="2"
              Margin="10,0,10,10">
        <StackPanel Orientation="Horizontal"
                    IsItemsHost="True" />
      </Border>
    </ControlTemplate>
  </Window.Resources>
  <i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
      <i:InvokeCommandAction Command="{Binding OnLoaded}" />
    </i:EventTrigger>
  </i:Interaction.Triggers>
  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="auto" />
      <ColumnDefinition Width="auto" />
      <ColumnDefinition Width="*" />
      <ColumnDefinition Width="auto" />
      <ColumnDefinition Width="*" />
      <ColumnDefinition Width="auto" />
      <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Label Content="Category"
           Grid.Row="0"
           Grid.Column="1" />
    <ComboBox x:Name="CategoryComboBox"
              ItemsSource="{Binding Categories}"
              SelectedItem="{Binding SelectedCategory}"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Center"
              Margin="5"
              Grid.Row="0"
              Grid.Column="2">
      <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged">
          <i:InvokeCommandAction Command="{Binding OnSelectCategory}"/>
        </i:EventTrigger>
      </i:Interaction.Triggers>
    </ComboBox>


    <Button Command="{Binding OnColorPickerButtonClick}"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Grid.Row="0"
            Grid.Column="0">
      <Image Height="24"
             Width="24"
             Source="{Binding ColorPickerIcon}" />
    </Button>

    <Label Content="Height"
           Grid.Row="0"
           Grid.Column="3" />
    <TextBox Text="{Binding IconHeight, UpdateSourceTrigger=LostFocus}"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Center"
             Grid.Row="0"
             Grid.Column="4" />
    
    <Label Content="Width"
           Grid.Row="0"
           Grid.Column="5" />
    <TextBox Text="{Binding IconWidth}"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Center"
             Grid.Row="0"
             Grid.Column="6" />

    <ListBox ItemsSource="{Binding Icons, IsAsync=True}"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Stretch"
             HorizontalContentAlignment="Center"
             Margin="10"
             Grid.Row="1"
             Grid.ColumnSpan="7">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <Image Source="{Binding}"
                 Height="{Binding IconHeight}"
                 Width="{Binding IconWidth}"
                 HorizontalAlignment="Center"/>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>
  </Grid>
</Window>
